"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[106],{1871:function(t,e,n){n.d(e,{Z:function(){return T}});n(8309);var l=n(6252),a=n(9963),i=n(3577),r={id:"form-post",class:"form-post"},o={class:"ctn ctn--column"},c={key:0,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},s={key:1,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},u=["src"],m={key:0,class:"text--error text--center text--normal-f text--bold-w"},d={class:"text--normal-f text--normal-w text--label ctn--column input-wrap"},f={for:"title"},p={key:1,class:"text--error text--center text--normal-f text--bold-w"},b={class:"text--normal-f text--normal-w text--label ctn ctn--space-between select-wrap"},x={for:"type"},g=["value"],w={class:"text--normal-f text--normal-w text--label ctn--column input-wrap textarea-wrap"},h={for:"text"},y={class:"ctn"};function v(t,e,n,v,_,P){var k=(0,l.up)("CancelButton"),C=(0,l.up)("SubmitButton");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("form",{class:"ctn ctn--column ctn--space-between",enctype:"multipart/form-data",onSubmit:e[7]||(e[7]=(0,a.iM)((function(t){return P.createOrModifyPost()}),["prevent"])),onInput:e[8]||(e[8]=function(t){return P.submitValidation()})},[(0,l._)("div",o,[_.imagePreview||n.oldPicture?((0,l.wg)(),(0,l.iD)("label",s,"Changer l'image")):((0,l.wg)(),(0,l.iD)("label",c,"Ajouter une image")),(0,l._)("input",{class:"input-file",id:"upload-file",type:"file",accept:".jpg, .jpeg, .png",onChange:e[0]||(e[0]=function(t){return P.handleFileUpload(t)})},null,32),(0,l._)("img",{src:_.imagePreview?_.imagePreview:n.oldPicture,class:"img-preview"},null,8,u)]),_.validator.file?((0,l.wg)(),(0,l.iD)("p",m," Fichiers autorisés : .jpg, .jpeg, .png, 5Mo maximum. ")):(0,l.kq)("",!0),(0,l._)("div",d,[(0,l._)("label",f,(0,i.zw)(_.label.title),1),(0,l.wy)((0,l._)("input",{class:"input text--normal-f text--light-w",id:"title",name:"title",type:"text",placeholder:"La Menace Fantôme","onUpdate:modelValue":e[1]||(e[1]=function(t){return _.form.title=t}),onChange:e[2]||(e[2]=function(t){return P.titleValidation()})},null,544),[[a.nr,_.form.title]])]),_.validator.title?((0,l.wg)(),(0,l.iD)("p",p," Le titre ne doit pas faire plus de 50 caractères. ")):(0,l.kq)("",!0),(0,l._)("div",b,[(0,l._)("label",x,(0,i.zw)(_.label.type),1),(0,l.wy)((0,l._)("select",{name:"type",id:"type","onUpdate:modelValue":e[3]||(e[3]=function(t){return _.form.type=t}),class:"select text--normal-f text--normal-w text--label"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.types,(function(t){return(0,l.wg)(),(0,l.iD)("option",{key:t,value:t},(0,i.zw)(t),9,g)})),128))],512),[[a.bM,_.form.type]])]),(0,l._)("div",w,[(0,l._)("label",h,(0,i.zw)(_.label.text),1),(0,l.wy)((0,l._)("textarea",{class:"textarea text--normal-f text--light-w",id:"text",name:"text",type:"textarea",placeholder:"Écrivez ici ...","onUpdate:modelValue":e[4]||(e[4]=function(t){return _.form.text=t}),onChange:e[5]||(e[5]=function(t){return P.textValidation()})},"\r\n        ",544),[[a.nr,_.form.text]])]),(0,l._)("div",y,[(0,l.Wm)(k,{label:_.label.cancel,onCancel:e[6]||(e[6]=function(t){return P.cancel()})},null,8,["label"]),"create-post"===this.$route.name?((0,l.wg)(),(0,l.j4)(C,{key:0,class:"ctn ctn--flex-end",label:_.label.submit,disabled:_.disableSubmit},null,8,["label","disabled"])):(0,l.kq)("",!0),"modify-post"===this.$route.name?((0,l.wg)(),(0,l.j4)(C,{key:1,class:"ctn ctn--flex-end",label:_.label.modify},null,8,["label"])):(0,l.kq)("",!0)])],32)])}var _=n(4648),P=(n(1539),n(8783),n(3948),n(285),n(1637),n(3403)),k={id:"cancel-button"};function C(t,e,n,a,r,o){return(0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("button",{type:"button",onClick:e[0]||(e[0]=function(e){return t.$emit("cancel")}),class:"btn text--btn text--center text--normal-w text--normal-f"},(0,i.zw)(n.label),1)])}var D={name:"CancelButton",el:"#cancel-button",props:{label:{type:String,required:!0}}},S=n(3744);const F=(0,S.Z)(D,[["render",C]]);var V=F,j=n(8637),Z=n(5844),$={name:"FormPost",el:"#form-post",components:{SubmitButton:P.Z,CancelButton:V},data:function(){return{label:{title:"Titre",content:"Contenu",type:"Catégorie",submit:"Publier",modify:"Modifier",cancel:"Annuler"},form:{image:this.oldPicture,title:this.oldTitle,type:this.oldType,text:this.oldText,isImportant:!1},validator:{file:!1,title:!1,type:!1,text:!1},types:{default:"",general:"Général"},imagePreview:void 0,disableSubmit:!0}},computed:{},methods:(0,_.Z)((0,_.Z)({handleFileUpload:function(t){this.form.image=t.target.files[0],this.validator.file=(0,Z.validateImage)(this.form.image),this.imagePreview=URL.createObjectURL(this.form.image)},titleValidation:function(){this.validator.title=(0,Z.validateDescription)(this.form.title)},submitValidation:function(){this.disableSubmit=(0,Z.validatePostForm)(this.validator,this.form)},textValidation:function(){this.validator.text=!1}},(0,j.nv)(["create_modify_post"])),{},{createOrModifyPost:function(){this.create_modify_post({form:this.form,route:this.$route})},cancel:function(){"create-post"===this.$route.name?this.$router.push({name:"home"}):this.$router.push({name:"my-profile",params:{userId:this.$store.getters.get_user_id}})}}),props:{oldTitle:{type:String,default:""},oldPicture:{type:File,default:null},oldText:{type:String,default:""},oldType:{type:String,default:""}}};const M=(0,S.Z)($,[["render",v]]);var T=M},7106:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var l=n(6252),a={id:"create-post",class:"create-post ctn ctn--column"},i=(0,l._)("h1",{class:"text--large-f text--bold-w text--label"},"Créer une publication",-1);function r(t,e,n,r,o,c){var s=(0,l.up)("FormPost");return(0,l.wg)(),(0,l.iD)("div",a,[i,(0,l.Wm)(s)])}var o=n(1871),c={name:"CreatePost",el:"#create-post",components:{FormPost:o.Z}},s=n(3744);const u=(0,s.Z)(c,[["render",r]]);var m=u}}]);
//# sourceMappingURL=106-legacy.54f93bd9.js.map