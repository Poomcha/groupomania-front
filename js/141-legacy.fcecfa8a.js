"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[141],{1871:function(t,e,l){l.d(e,{Z:function(){return M}});l(8309);var n=l(6252),i=l(9963),a=l(3577),o={id:"form-post",class:"form-post"},r={class:"ctn ctn--column"},s={key:0,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},u={key:1,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},c=["src"],m={key:0,class:"text--error text--center text--normal-f text--bold-w"},d={class:"text--normal-f text--normal-w text--label ctn--column input-wrap"},p={for:"title"},f={key:1,class:"text--error text--center text--normal-f text--bold-w"},x={class:"text--normal-f text--normal-w text--label ctn ctn--space-between select-wrap"},b={for:"type"},y=["value"],g={class:"text--normal-f text--normal-w text--label ctn--column input-wrap textarea-wrap"},h={for:"text"},w={class:"ctn"};function v(t,e,l,v,P,_){var k=(0,n.up)("CancelButton"),C=(0,n.up)("SubmitButton");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("form",{class:"ctn ctn--column ctn--space-between",enctype:"multipart/form-data",onSubmit:e[7]||(e[7]=(0,i.iM)((function(t){return _.createOrModifyPost()}),["prevent"])),onInput:e[8]||(e[8]=function(t){return _.submitValidation()})},[(0,n._)("div",r,[P.imagePreview||l.oldPicture?((0,n.wg)(),(0,n.iD)("label",u,"Changer l'image")):((0,n.wg)(),(0,n.iD)("label",s,"Ajouter une image")),(0,n._)("input",{class:"input-file",id:"upload-file",type:"file",accept:".jpg, .jpeg, .png",onChange:e[0]||(e[0]=function(t){return _.handleFileUpload(t)})},null,32),(0,n._)("img",{src:P.imagePreview?P.imagePreview:l.oldPicture,class:"img-preview"},null,8,c)]),P.validator.file?((0,n.wg)(),(0,n.iD)("p",m," Fichiers autorisés : .jpg, .jpeg, .png, 5Mo maximum. ")):(0,n.kq)("",!0),(0,n._)("div",d,[(0,n._)("label",p,(0,a.zw)(P.label.title),1),(0,n.wy)((0,n._)("input",{class:"input text--normal-f text--light-w",id:"title",name:"title",type:"text",placeholder:"La Menace Fantôme","onUpdate:modelValue":e[1]||(e[1]=function(t){return P.form.title=t}),onChange:e[2]||(e[2]=function(t){return _.titleValidation()})},null,544),[[i.nr,P.form.title]])]),P.validator.title?((0,n.wg)(),(0,n.iD)("p",f," Le titre ne doit pas faire plus de 50 caractères. ")):(0,n.kq)("",!0),(0,n._)("div",x,[(0,n._)("label",b,(0,a.zw)(P.label.type),1),(0,n.wy)((0,n._)("select",{name:"type",id:"type","onUpdate:modelValue":e[3]||(e[3]=function(t){return P.form.type=t}),class:"select text--normal-f text--normal-w text--label"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(P.types,(function(t){return(0,n.wg)(),(0,n.iD)("option",{key:t,value:t},(0,a.zw)(t),9,y)})),128))],512),[[i.bM,P.form.type]])]),(0,n._)("div",g,[(0,n._)("label",h,(0,a.zw)(P.label.text),1),(0,n.wy)((0,n._)("textarea",{class:"textarea text--normal-f text--light-w",id:"text",name:"text",type:"textarea",placeholder:"Écrivez ici ...","onUpdate:modelValue":e[4]||(e[4]=function(t){return P.form.text=t}),onChange:e[5]||(e[5]=function(t){return _.textValidation()})},"\r\n        ",544),[[i.nr,P.form.text]])]),(0,n._)("div",w,[(0,n.Wm)(k,{label:P.label.cancel,onCancel:e[6]||(e[6]=function(t){return _.cancel()})},null,8,["label"]),"create-post"===this.$route.name?((0,n.wg)(),(0,n.j4)(C,{key:0,class:"ctn ctn--flex-end",label:P.label.submit,disabled:P.disableSubmit},null,8,["label","disabled"])):(0,n.kq)("",!0),"modify-post"===this.$route.name?((0,n.wg)(),(0,n.j4)(C,{key:1,class:"ctn ctn--flex-end",label:P.label.modify},null,8,["label"])):(0,n.kq)("",!0)])],32)])}var P=l(4648),_=(l(1539),l(8783),l(3948),l(285),l(1637),l(3403)),k={id:"cancel-button"};function C(t,e,l,i,o,r){return(0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("button",{type:"button",onClick:e[0]||(e[0]=function(e){return t.$emit("cancel")}),class:"btn text--btn text--center text--normal-w text--normal-f"},(0,a.zw)(l.label),1)])}var T={name:"CancelButton",el:"#cancel-button",props:{label:{type:String,required:!0}}},S=l(3744);const D=(0,S.Z)(T,[["render",C]]);var Z=D,F=l(8637),V=l(5844),$={name:"FormPost",el:"#form-post",components:{SubmitButton:_.Z,CancelButton:Z},data:function(){return{label:{title:"Titre",content:"Contenu",type:"Catégorie",submit:"Publier",modify:"Modifier",cancel:"Annuler"},form:{image:this.oldPicture,title:this.oldTitle,type:this.oldType,text:this.oldText,isImportant:!1},validator:{file:!1,title:!1,type:!1,text:!1},types:{default:"",general:"Général"},imagePreview:void 0,disableSubmit:!0}},computed:{},methods:(0,P.Z)((0,P.Z)({handleFileUpload:function(t){this.form.image=t.target.files[0],this.validator.file=(0,V.validateImage)(this.form.image),this.imagePreview=URL.createObjectURL(this.form.image)},titleValidation:function(){this.validator.title=(0,V.validateDescription)(this.form.title)},submitValidation:function(){this.disableSubmit=(0,V.validatePostForm)(this.validator,this.form)},textValidation:function(){this.validator.text=!1}},(0,F.nv)(["create_modify_post"])),{},{createOrModifyPost:function(){this.create_modify_post({form:this.form,route:this.$route})},cancel:function(){"create-post"===this.$route.name?this.$router.push({name:"home"}):this.$router.push({name:"my-profile",params:{userId:this.$store.getters.get_user_id}})}}),props:{oldTitle:{type:String,default:""},oldPicture:{type:File,default:null},oldText:{type:String,default:""},oldType:{type:String,default:""}}};const j=(0,S.Z)($,[["render",v]]);var M=j},3141:function(t,e,l){l.r(e),l.d(e,{default:function(){return d}});var n=l(6252),i={id:"modify-post"};function a(t,e,l,a,o,r){var s=(0,n.up)("FormPost");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(s,{oldPicture:r.myPost.postPictureURL,oldTitle:r.myPost.title,oldText:r.myPost.text,oldType:r.myPost.type},null,8,["oldPicture","oldTitle","oldText","oldType"])])}var o=l(4648),r=(l(9826),l(1539),l(1871)),s=l(8637),u={name:"ModifyPost",el:"#modify-post",components:{FormPost:r.Z},computed:(0,o.Z)((0,o.Z)({},(0,s.Se)(["get_local_posts"])),{},{myPost:function(){var t=this;return this.get_local_posts.find((function(e){return e.id===t.$route.params.postId}))}})},c=l(3744);const m=(0,c.Z)(u,[["render",a]]);var d=m}}]);
//# sourceMappingURL=141-legacy.fcecfa8a.js.map