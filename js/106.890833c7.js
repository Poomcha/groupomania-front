"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[106],{1871:function(t,e,l){l.d(e,{Z:function(){return T}});var a=l(6252),i=l(9963),n=l(3577);const o={id:"form-post",class:"form-post"},r={class:"ctn ctn--column"},s={key:0,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},c={key:1,for:"upload-file",class:"btn text--btn text--center text--normal-w text--normal-f"},m=["src"],u={key:0,class:"text--error text--center text--normal-f text--bold-w"},d={class:"text--normal-f text--normal-w text--label ctn--column input-wrap"},p={for:"title"},f={key:1,class:"text--error text--center text--normal-f text--bold-w"},b={class:"text--normal-f text--normal-w text--label ctn ctn--space-between select-wrap"},x={for:"type"},g=["value"],w={class:"text--normal-f text--normal-w text--label ctn--column input-wrap textarea-wrap"},h={for:"text"},y={class:"ctn"};function v(t,e,l,v,_,P){const k=(0,a.up)("CancelButton"),C=(0,a.up)("SubmitButton");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("form",{class:"ctn ctn--column ctn--space-between",enctype:"multipart/form-data",onSubmit:e[7]||(e[7]=(0,i.iM)((t=>P.createOrModifyPost()),["prevent"])),onInput:e[8]||(e[8]=t=>P.submitValidation())},[(0,a._)("div",r,[_.imagePreview||l.oldPicture?((0,a.wg)(),(0,a.iD)("label",c,"Changer l'image")):((0,a.wg)(),(0,a.iD)("label",s,"Ajouter une image")),(0,a._)("input",{class:"input-file",id:"upload-file",type:"file",accept:".jpg, .jpeg, .png",onChange:e[0]||(e[0]=t=>P.handleFileUpload(t))},null,32),(0,a._)("img",{src:_.imagePreview?_.imagePreview:l.oldPicture,class:"img-preview"},null,8,m)]),_.validator.file?((0,a.wg)(),(0,a.iD)("p",u," Fichiers autorisés : .jpg, .jpeg, .png, 5Mo maximum. ")):(0,a.kq)("",!0),(0,a._)("div",d,[(0,a._)("label",p,(0,n.zw)(_.label.title),1),(0,a.wy)((0,a._)("input",{class:"input text--normal-f text--light-w",id:"title",name:"title",type:"text",placeholder:"La Menace Fantôme","onUpdate:modelValue":e[1]||(e[1]=t=>_.form.title=t),onChange:e[2]||(e[2]=t=>P.titleValidation())},null,544),[[i.nr,_.form.title]])]),_.validator.title?((0,a.wg)(),(0,a.iD)("p",f," Le titre ne doit pas faire plus de 50 caractères. ")):(0,a.kq)("",!0),(0,a._)("div",b,[(0,a._)("label",x,(0,n.zw)(_.label.type),1),(0,a.wy)((0,a._)("select",{name:"type",id:"type","onUpdate:modelValue":e[3]||(e[3]=t=>_.form.type=t),class:"select text--normal-f text--normal-w text--label"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.types,(t=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:t},(0,n.zw)(t),9,g)))),128))],512),[[i.bM,_.form.type]])]),(0,a._)("div",w,[(0,a._)("label",h,(0,n.zw)(_.label.text),1),(0,a.wy)((0,a._)("textarea",{class:"textarea text--normal-f text--light-w",id:"text",name:"text",type:"textarea",placeholder:"Écrivez ici ...","onUpdate:modelValue":e[4]||(e[4]=t=>_.form.text=t),onChange:e[5]||(e[5]=t=>P.textValidation())},"\r\n        ",544),[[i.nr,_.form.text]])]),(0,a._)("div",y,[(0,a.Wm)(k,{label:_.label.cancel,onCancel:e[6]||(e[6]=t=>P.cancel())},null,8,["label"]),"create-post"===this.$route.name?((0,a.wg)(),(0,a.j4)(C,{key:0,class:"ctn ctn--flex-end",label:_.label.submit,disabled:_.disableSubmit},null,8,["label","disabled"])):(0,a.kq)("",!0),"modify-post"===this.$route.name?((0,a.wg)(),(0,a.j4)(C,{key:1,class:"ctn ctn--flex-end",label:_.label.modify},null,8,["label"])):(0,a.kq)("",!0)])],32)])}var _=l(3403);const P={id:"cancel-button"};function k(t,e,l,i,o,r){return(0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("button",{type:"button",onClick:e[0]||(e[0]=e=>t.$emit("cancel")),class:"btn text--btn text--center text--normal-w text--normal-f"},(0,n.zw)(l.label),1)])}var C={name:"CancelButton",el:"#cancel-button",props:{label:{type:String,required:!0}}},D=l(3744);const S=(0,D.Z)(C,[["render",k]]);var F=S,V=l(8637),j=l(5844),$={name:"FormPost",el:"#form-post",components:{SubmitButton:_.Z,CancelButton:F},data(){return{label:{title:"Titre",content:"Contenu",type:"Catégorie",submit:"Publier",modify:"Modifier",cancel:"Annuler"},form:{image:this.oldPicture,title:this.oldTitle,type:this.oldType,text:this.oldText,isImportant:!1},validator:{file:!1,title:!1,type:!1,text:!1},types:{default:"",general:"Général"},imagePreview:void 0,disableSubmit:!0}},computed:{},methods:{handleFileUpload(t){this.form.image=t.target.files[0],this.validator.file=(0,j.validateImage)(this.form.image),this.imagePreview=URL.createObjectURL(this.form.image)},titleValidation(){this.validator.title=(0,j.validateDescription)(this.form.title)},submitValidation(){this.disableSubmit=(0,j.validatePostForm)(this.validator,this.form)},textValidation(){this.validator.text=!1},...(0,V.nv)(["create_modify_post"]),createOrModifyPost(){this.create_modify_post({form:this.form,route:this.$route})},cancel(){"create-post"===this.$route.name?this.$router.push({name:"home"}):this.$router.push({name:"my-profile",params:{userId:this.$store.getters.get_user_id}})}},props:{oldTitle:{type:String,default:""},oldPicture:{type:File,default:null},oldText:{type:String,default:""},oldType:{type:String,default:""}}};const M=(0,D.Z)($,[["render",v]]);var T=M},7106:function(t,e,l){l.r(e),l.d(e,{default:function(){return u}});var a=l(6252);const i={id:"create-post",class:"create-post ctn ctn--column"},n=(0,a._)("h1",{class:"text--large-f text--bold-w text--label"},"Créer une publication",-1);function o(t,e,l,o,r,s){const c=(0,a.up)("FormPost");return(0,a.wg)(),(0,a.iD)("div",i,[n,(0,a.Wm)(c)])}var r=l(1871),s={name:"CreatePost",el:"#create-post",components:{FormPost:r.Z}},c=l(3744);const m=(0,c.Z)(s,[["render",o]]);var u=m}}]);
//# sourceMappingURL=106.890833c7.js.map